# ============================================
# Komuchi API - Environment Variables
# ============================================
# Copy this file to .env and update values as needed
# cp .env.example .env

# Node Environment
NODE_ENV=development

# API Server Configuration
API_PORT=3001
API_HOST=0.0.0.0
CORS_ORIGIN=http://localhost:3000

# Database (SQLite - works out of the box, no external DB needed)
DATABASE_URL=file:./prisma/dev.db

# Redis (for BullMQ job queue)
# Leave empty to run without Redis (Chat only, no job processing)
REDIS_URL=redis://localhost:6379

# S3-compatible Storage (required for audio file storage)
S3_BUCKET=komuchi
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
# For MinIO (local development)
S3_ENDPOINT=http://localhost:9000
# For AWS S3 or Cloudflare R2, remove S3_ENDPOINT or set to your endpoint

# AI Services
# Defaults to "mock" - no API keys needed to get started
TRANSCRIPTION_PROVIDER=mock
DEBRIEF_PROVIDER=mock

# To use real AI providers, uncomment and set:
# TRANSCRIPTION_PROVIDER=openai
# DEBRIEF_PROVIDER=openai
# OPENAI_API_KEY=sk-your-key-here

# Or for Deepgram:
# TRANSCRIPTION_PROVIDER=deepgram
# DEEPGRAM_API_KEY=your-deepgram-key

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# Upload Limits
MAX_UPLOAD_SIZE_MB=500

# Optional: Server-side transcoding (for MediaRecorder webm/ogg compatibility)
ENABLE_FFMPEG_TRANSCODE=false

# Diarization Service (optional - for voice profile enrollment)
DIARIZATION_SERVICE_URL=http://localhost:8001

# Error Tracking (optional)
# SENTRY_DSN=https://your-dsn@sentry.io/project
# SENTRY_ENVIRONMENT=development

# Observability (optional)
OTEL_ENABLED=false
# OTEL_SERVICE_NAME=komuchi-api
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
